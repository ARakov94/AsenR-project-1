<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D 5e 2024 ‚Äî –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–∞ –≥–µ—Ä–æ–∏ –∏ –ø—Ä–µ–¥–º–µ—Ç–∏</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚öîÔ∏è</text></svg>">
</head>
<body>
    <div class="background-overlay"></div>
    
    <!-- Floating particles -->
    <div class="particles" id="particles"></div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="dragon-icon">üêâ</div>
            <h1 class="title">D&D 5e –ö–æ–≤–∞—á–Ω–∏—Ü–∞</h1>
            <p class="subtitle">–°—ä–∑–¥–∞–π —Å–≤–æ—è –≥–µ—Ä–æ–π –∏ –Ω–µ–≥–æ–≤–∞—Ç–∞ –∏—Å—Ç–æ—Ä–∏—è ‚Äî –ò–∑–¥–∞–Ω–∏–µ 2024</p>
        </header>

        <!-- Character Setup -->
        <section class="card character-setup">
            <h2 class="card-title">‚öîÔ∏è –û—Å–Ω–æ–≤–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            
            <div class="form-grid">
                <div class="form-group">
                    <label for="charClass">–ö–ª–∞—Å</label>
                    <select id="charClass">
                        <option value="">‚Äî –ò–∑–±–µ—Ä–∏ –∫–ª–∞—Å ‚Äî</option>
                        <option value="Barbarian">Barbarian (–í–∞—Ä–≤–∞—Ä–∏–Ω)</option>
                        <option value="Bard">Bard (–ë–∞—Ä–¥)</option>
                        <option value="Cleric">Cleric (–ñ—Ä–µ—Ü)</option>
                        <option value="Druid">Druid (–î—Ä—É–∏–¥)</option>
                        <option value="Fighter">Fighter (–ë–æ–µ—Ü)</option>
                        <option value="Monk">Monk (–ú–æ–Ω–∞—Ö)</option>
                        <option value="Paladin">Paladin (–ü–∞–ª–∞–¥–∏–Ω)</option>
                        <option value="Ranger">Ranger (–†–µ–π–Ω–¥–∂—ä—Ä)</option>
                        <option value="Rogue">Rogue (–ú–æ—à–µ–Ω–∏–∫)</option>
                        <option value="Sorcerer">Sorcerer (–ú–∞–≥—å–æ—Å–Ω–∏–∫)</option>
                        <option value="Warlock">Warlock (–ß–µ—Ä–Ω–æ–∫–Ω–∏–∂–Ω–∏–∫)</option>
                        <option value="Wizard">Wizard (–í—ä–ª—à–µ–±–Ω–∏–∫)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="charRace">–†–∞—Å–∞</label>
                    <select id="charRace">
                        <option value="">‚Äî –ò–∑–±–µ—Ä–∏ —Ä–∞—Å–∞ ‚Äî</option>
                        <option value="Human">Human (–ß–æ–≤–µ–∫)</option>
                        <option value="Elf">Elf (–ï–ª—Ñ)</option>
                        <option value="Dwarf">Dwarf (–î–∂—É–¥–∂–µ)</option>
                        <option value="Halfling">Halfling (–•–∞—Ñ–ª–∏–Ω–≥)</option>
                        <option value="Gnome">Gnome (–ì–Ω–æ–º)</option>
                        <option value="Half-Orc">Half-Orc (–ü–æ–ª—É–æ—Ä–∫)</option>
                        <option value="Tiefling">Tiefling (–¢–∏–π—Ñ–ª–∏–Ω–≥)</option>
                        <option value="Dragonborn">Dragonborn (–î—Ä–∞–∫–æ–Ω–æ—Ä–æ–¥–µ–Ω)</option>
                        <option value="Goliath">Goliath (–ì–æ–ª–∏–∞—Ç)</option>
                        <option value="Aasimar">Aasimar (–ê–∞—Å–∏–º–∞—Ä)</option>
                        <option value="Orc">Orc (–û—Ä–∫)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="charLevel">–ù–∏–≤–æ</label>
                    <select id="charLevel">
                        <option value="1" selected>–ù–∏–≤–æ 1</option>
                        <option value="2">–ù–∏–≤–æ 2</option>
                        <option value="3">–ù–∏–≤–æ 3</option>
                        <option value="4">–ù–∏–≤–æ 4</option>
                        <option value="5">–ù–∏–≤–æ 5</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- Backstory Elements Selection -->
        <section class="card backstory-setup">
            <h2 class="card-title">üìú –ï–ª–µ–º–µ–Ω—Ç–∏ –Ω–∞ –≥–µ—Ä–æ—è</h2>
            <p class="backstory-desc">–û—Ç–º–µ—Ç–Ω–∞—Ç–∏ = –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–∏ –æ—Ç AI. –ü—Ä–µ–º–∞—Ö–Ω–∏ –æ—Ç–º–µ—Ç–∫–∞ = –≤—ä–≤–µ–¥–∏ —Å–≤–æ—è —Å—Ç–æ–π–Ω–æ—Å—Ç.</p>
            <div class="backstory-checkboxes">
                <div class="backstory-option-wrapper">
                    <label class="backstory-option">
                        <input type="checkbox" value="name" checked> <span>üè∑Ô∏è –ò–º–µ –Ω–∞ –≥–µ—Ä–æ—è</span>
                    </label>
                    <div class="backstory-custom-input" style="display: none;">
                        <input type="text" data-element="name" placeholder="–í—ä–≤–µ–¥–∏ –∏–º–µ –Ω–∞ –≥–µ—Ä–æ—è...">
                    </div>
                </div>
                <div class="backstory-option-wrapper">
                    <label class="backstory-option">
                        <input type="checkbox" value="origin" checked> <span>üåç –û—Ç –∫—ä–¥–µ –µ (—Ä–æ–¥–Ω–æ –º—è—Å—Ç–æ)</span>
                    </label>
                    <div class="backstory-custom-input" style="display: none;">
                        <input type="text" data-element="origin" placeholder="–ù–∞–ø—Ä. Waterdeep, –º–∞–ª–∫–æ —Å–µ–ª–æ –≤ –ø–ª–∞–Ω–∏–Ω–∏—Ç–µ...">
                    </div>
                </div>
                <div class="backstory-option-wrapper">
                    <label class="backstory-option">
                        <input type="checkbox" value="strengths" checked> <span>üí™ –°–∏–ª–Ω–∏ —á–µ—Ä—Ç–∏</span>
                    </label>
                    <div class="backstory-custom-input" style="display: none;">
                        <textarea data-element="strengths" placeholder="–í—ä–≤–µ–¥–∏ —Å–∏–ª–Ω–∏ —á–µ—Ä—Ç–∏ (–ø–æ –µ–¥–Ω–∞ –Ω–∞ —Ä–µ–¥)..." rows="3"></textarea>
                    </div>
                </div>
                <div class="backstory-option-wrapper">
                    <label class="backstory-option">
                        <input type="checkbox" value="weaknesses" checked> <span>üò∞ –°–ª–∞–±–∏ —á–µ—Ä—Ç–∏</span>
                    </label>
                    <div class="backstory-custom-input" style="display: none;">
                        <textarea data-element="weaknesses" placeholder="–í—ä–≤–µ–¥–∏ —Å–ª–∞–±–∏ —á–µ—Ä—Ç–∏ (–ø–æ –µ–¥–Ω–∞ –Ω–∞ —Ä–µ–¥)..." rows="3"></textarea>
                    </div>
                </div>
                <div class="backstory-option-wrapper">
                    <label class="backstory-option">
                        <input type="checkbox" value="personality" checked> <span>üé≠ –•–∞—Ä–∞–∫—Ç–µ—Ä</span>
                    </label>
                    <div class="backstory-custom-input" style="display: none;">
                        <textarea data-element="personality" placeholder="–û–ø–∏—à–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –Ω–∞ –≥–µ—Ä–æ—è..." rows="2"></textarea>
                    </div>
                </div>
                <div class="backstory-option-wrapper">
                    <label class="backstory-option">
                        <input type="checkbox" value="history" checked> <span>üìñ –ò—Å—Ç–æ—Ä–∏—è –∏ –ø—Ä–æ–∏–∑—Ö–æ–¥</span>
                    </label>
                    <div class="backstory-custom-input" style="display: none;">
                        <textarea data-element="history" placeholder="–†–∞–∑–∫–∞–∂–∏ –∏—Å—Ç–æ—Ä–∏—è—Ç–∞ –Ω–∞ –≥–µ—Ä–æ—è..." rows="3"></textarea>
                    </div>
                </div>
                <div class="backstory-option-wrapper">
                    <label class="backstory-option">
                        <input type="checkbox" value="goal" checked> <span>üéØ –¶–µ–ª –≤ –∂–∏–≤–æ—Ç–∞</span>
                    </label>
                    <div class="backstory-custom-input" style="display: none;">
                        <textarea data-element="goal" placeholder="–ö–∞–∫–≤–∞ –µ —Ü–µ–ª—Ç–∞ –Ω–∞ –≥–µ—Ä–æ—è..." rows="2"></textarea>
                    </div>
                </div>
                <div class="backstory-option-wrapper">
                    <label class="backstory-option">
                        <input type="checkbox" value="aspiration" checked> <span>‚≠ê –ö—ä–º –∫–∞–∫–≤–æ —Å–µ —Å—Ç—Ä–µ–º–∏</span>
                    </label>
                    <div class="backstory-custom-input" style="display: none;">
                        <textarea data-element="aspiration" placeholder="–ö—ä–º –∫–∞–∫–≤–æ —Å–µ —Å—Ç—Ä–µ–º–∏ –≥–µ—Ä–æ—è—Ç..." rows="2"></textarea>
                    </div>
                </div>
            </div>
        </section>

        <!-- Generate Backstory Button -->
        <div class="generate-section">
            <button id="generateBackstoryBtn" class="generate-btn backstory-btn">
                <span class="btn-icon">üìú</span>
                <span class="btn-text">–ì–µ–Ω–µ—Ä–∏—Ä–∞–π –≥–µ—Ä–æ–π!</span>
            </button>
        </div>

        <!-- Backstory Loading -->
        <div class="loading" id="backstoryLoading" style="display: none;">
            <div class="loading-spinner"></div>
            <p class="loading-text">–ë–∞—Ä–¥—ä—Ç —Ä–∞–∑–∫–∞–∑–≤–∞ –∏—Å—Ç–æ—Ä–∏—è—Ç–∞... üìú</p>
            <p class="loading-flavor" id="backstoryLoadingFlavor"></p>
        </div>

        <!-- Backstory Error -->
        <div class="error-message" id="backstoryError" style="display: none;">
            <p>‚ö†Ô∏è <span id="backstoryErrorText"></span></p>
        </div>

        <!-- Backstory Results -->
        <section class="backstory-results" id="backstoryResults" style="display: none;">
            <h2 class="results-title">üßô –¢–≤–æ—è—Ç –≥–µ—Ä–æ–π</h2>
            <div class="backstory-card" id="backstoryCard"></div>
        </section>

        <!-- Separator -->
        <div class="section-separator">
            <span class="separator-line"></span>
            <span class="separator-icon">‚öîÔ∏è</span>
            <span class="separator-line"></span>
        </div>

        <!-- Items Section (Secondary) -->
        <section class="card items-section-header" id="itemsSectionHeader">
            <button class="collapsible-toggle" id="itemsToggle">
                <h2 class="card-title" style="margin-bottom:0; border-bottom:none; padding-bottom:0; cursor:pointer;">üéí –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç–∏ <span class="toggle-arrow" id="itemsToggleArrow">‚ñæ</span></h2>
            </button>
        </section>

        <div class="collapsible-content" id="itemsCollapsible" style="display: none;">

        <!-- Character Name for Items -->
        <section class="card">
            <div class="form-grid">
                <div class="form-group">
                    <label for="charName">–ò–º–µ –Ω–∞ –≥–µ—Ä–æ—è <span class="optional-label">(–ø–æ –∏–∑–±–æ—Ä)</span></label>
                    <input type="text" id="charName" placeholder="–Ω–∞–ø—Ä. –¢–æ—Ä–¥–µ–∫ –û–≥–Ω–µ–±—Ä–∞–¥–∏—è">
                </div>
                <div class="form-group">
                    <label>–í–∏–¥ –ø—Ä–µ–¥–º–µ—Ç–∏</label>
                    <div class="multi-select" id="itemTypeSelect">
                        <button type="button" class="multi-select-toggle" id="itemTypeToggle">
                            <span class="multi-select-text">üé≤ –°–º–µ—Å–µ–Ω–∏ (–≤—Å–∏—á–∫–∏ –≤–∏–¥–æ–≤–µ)</span>
                            <span class="multi-select-arrow">‚ñæ</span>
                        </button>
                        <div class="multi-select-dropdown" id="itemTypeDropdown">
                            <label class="multi-select-option">
                                <input type="checkbox" value="weapons"> <span>‚öîÔ∏è –û—Ä—ä–∂–∏—è</span>
                            </label>
                            <label class="multi-select-option">
                                <input type="checkbox" value="armor"> <span>üõ°Ô∏è –ë—Ä–æ–Ω—è –∏ —â–∏—Ç–æ–≤–µ</span>
                            </label>
                            <label class="multi-select-option">
                                <input type="checkbox" value="potions"> <span>üß™ –û—Ç–≤–∞—Ä–∏</span>
                            </label>
                            <label class="multi-select-option">
                                <input type="checkbox" value="scrolls"> <span>üìú –°–≤–∏—Ç—ä—Ü–∏ –∏ –∫–Ω–∏–≥–∏</span>
                            </label>
                            <label class="multi-select-option">
                                <input type="checkbox" value="jewelry"> <span>üíç –ë–∏–∂—É—Ç–∞ (–ø—Ä—ä—Å—Ç–µ–Ω–∏, –∞–º—É–ª–µ—Ç–∏)</span>
                            </label>
                            <label class="multi-select-option">
                                <input type="checkbox" value="trinkets"> <span>üîÆ –î—Ä–µ–±–æ–ª–∏–∏ –∏ —Ç–∞–ª–∏—Å–º–∞–Ω–∏</span>
                            </label>
                            <label class="multi-select-option">
                                <input type="checkbox" value="clothing"> <span>üëò –î—Ä–µ—Ö–∏ –∏ –æ–±—É–≤–∫–∏</span>
                            </label>
                            <label class="multi-select-option">
                                <input type="checkbox" value="tools"> <span>üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏</span>
                            </label>
                            <label class="multi-select-option">
                                <input type="checkbox" value="consumables"> <span>üçñ –ö–æ–Ω—Å—É–º–∞—Ç–∏–≤–∏ (—Ö—Ä–∞–Ω–∞, –Ω–∞–ø–∏—Ç–∫–∏)</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Spiciness Slider -->
        <section class="card spiciness-section">
            <h2 class="card-title">üå∂Ô∏è –ù–∏–≤–æ –Ω–∞ –ø–∏–∫–∞–Ω—Ç–Ω–æ—Å—Ç</h2>
            <p class="spiciness-desc">–ö–æ–ª–∫–æ... <em>–¥—Ä—ä–∑–∫–∏</em> –¥–∞ –±—ä–¥–∞—Ç –ø—Ä–µ–¥–º–µ—Ç–∏—Ç–µ?</p>
            
            <div class="slider-container">
                <div class="slider-labels">
                    <span class="label-safe">üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ</span>
                    <span class="label-mild">üòè –õ–µ–∫–æ</span>
                    <span class="label-spicy">üî• –ü–∏–∫–∞–Ω—Ç–Ω–æ</span>
                    <span class="label-hot">üòà –î—è–≤–æ–ª—Å–∫–æ</span>
                </div>
                <input type="range" id="spicySlider" min="0" max="100" value="0" class="spicy-slider">
                <div class="slider-value-display">
                    <span id="spicyValue">0</span>%
                    <span id="spicyEmoji">üõ°Ô∏è</span>
                </div>
                <p class="age-warning" id="ageWarning" style="display: none;">
                    ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: –°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –º–æ–∂–µ –¥–∞ –µ –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–æ –∑–∞ –ª–∏—Ü–∞ –ø–æ–¥ 18 –≥–æ–¥–∏–Ω–∏
                </p>
            </div>
        </section>

        <!-- Item Count -->
        <section class="card">
            <h2 class="card-title">üì¶ –ë—Ä–æ–π –ø—Ä–µ–¥–º–µ—Ç–∏</h2>
            <div class="item-count-selector">
                <button class="count-btn" data-count="3">3</button>
                <button class="count-btn active" data-count="5">5</button>
                <button class="count-btn" data-count="8">8</button>
                <button class="count-btn" data-count="10">10</button>
            </div>
        </section>

        <!-- Generate Items Button -->
        <div class="generate-section">
            <button id="generateBtn" class="generate-btn items-btn">
                <span class="btn-icon">‚öíÔ∏è</span>
                <span class="btn-text">–ì–µ–Ω–µ—Ä–∏—Ä–∞–π –ø—Ä–µ–¥–º–µ—Ç–∏!</span>
            </button>
        </div>

        <!-- Loading -->
        <div class="loading" id="loading" style="display: none;">
            <div class="loading-spinner"></div>
            <p class="loading-text">–ö–æ–≤–∞—á–Ω–∏—Ü–∞—Ç–∞ —Ä–∞–±–æ—Ç–∏... ‚öíÔ∏è</p>
            <p class="loading-flavor" id="loadingFlavor"></p>
        </div>

        <!-- Error -->
        <div class="error-message" id="errorMessage" style="display: none;">
            <p>‚ö†Ô∏è <span id="errorText"></span></p>
        </div>

        <!-- Item Results -->
        <section class="results" id="results" style="display: none;">
            <h2 class="results-title">üéí –¢–≤–æ–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç–∏</h2>
            <div class="items-grid" id="itemsGrid"></div>
        </section>

        </div><!-- end collapsible-content -->

        <!-- Footer -->
        <footer class="footer">
            <p>Powered by n8n & AI ‚ö° | D&D 5e 2024 Edition</p>
            <p class="footer-small">–ù–µ–æ—Ñ–∏—Ü–∏–∞–ª–µ–Ω –ø—Ä–æ–µ–∫—Ç ‚Äî –Ω—è–º–∞ –≤—Ä—ä–∑–∫–∞ —Å Wizards of the Coast</p>
        </footer>
    </div>

    <!-- n8n Config Modal -->
    <div class="modal-overlay" id="configModal" style="display: none;">
        <div class="modal">
            <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ –≤—Ä—ä–∑–∫–∞—Ç–∞</h3>
            <div class="form-group">
                <label for="webhookUrl">n8n Webhook URL</label>
                <input type="url" id="webhookUrl" placeholder="https://your-n8n.example.com/webhook/dnd-items">
            </div>
            <div class="modal-buttons">
                <button id="saveConfig" class="btn-save">–ó–∞–ø–∞–∑–∏</button>
                <button id="cancelConfig" class="btn-cancel">–û—Ç–∫–∞–∑</button>
            </div>
        </div>
    </div>

    <!-- Settings gear -->
    <button class="settings-btn" id="settingsBtn" title="n8n –Ω–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>

    <script src="script.js"></script>
</body>
</html>
